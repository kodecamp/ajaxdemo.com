(function() {
  console.log("File loaded");
  function fetchJson() {
    const xhr = new XMLHttpRequest();
    xhr.addEventListener('load', () => {
      console.log(xhr.status);
      const list = xhr.response.people.map((person) => {
        return `<li> ${person.name} | ${person.address}</li>`;
      }).join("");
      const htmlFragment = "<p>Only data is received and this template is generated at the client side</p><ul>" + list + "</ul>";
      document.querySelector('#jsonContainer').innerHTML = htmlFragment;
    });
    // xhr.open("GET", "./data/few-people.json");
    xhr.open('GET','./people.php');
    xhr.responseType = "json";
    xhr.send();
  }

  function fetchHtml() {
    const xhr = new XMLHttpRequest();
    xhr.addEventListener('load', () => {
      console.log(xhr.status);
      const html = xhr.response;
      const htmlContainer = document.querySelector('#htmlContainer');
      htmlContainer.innerHTML = html;
    });
    xhr.open("GET", "./data/fragment.html");
    xhr.responseType = "text";
    xhr.send();
  }

  function fetchImage() {
    const xhr = new XMLHttpRequest();
    xhr.addEventListener('load', () => {
      console.log(xhr.status);
      const imageData = xhr.response;
      console.dir(imageData);
      const imageUrl = window.URL.createObjectURL(imageData);
      console.log(imageUrl);
      document.querySelector('#imagePlaceholder').src = imageUrl;
    });
    xhr.open("GET", "./data/logo.png");
    xhr.responseType = "blob";
    xhr.send();
  }

  // instance of buttons
  const jsonBtn = document.querySelector('#jsonBtn');
  const htmlBtn = document.querySelector('#htmlBtn');
  const imageBtn = document.querySelector('#imageBtn');

  jsonBtn.addEventListener('click', fetchJson);
  htmlBtn.addEventListener('click', fetchHtml);
  imageBtn.addEventListener('click', fetchImage);


  const dataContainer = document.querySelector('#dataContainer');

})();